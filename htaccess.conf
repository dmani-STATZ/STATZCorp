# Apache configuration for Django static files
# Include this in your VirtualHost configuration

# Static files configuration
Alias /static/ "C:/inetpub/wwwroot/STATZCorp/staticfiles/"
<Directory "C:/inetpub/wwwroot/STATZCorp/staticfiles">
    Options -Indexes
    Require all granted
    
    # Enable serving of static files
    <IfModule mod_mime.c>
        AddType text/css .css
        AddType text/javascript .js
        AddType text/plain .pem .crt
        AddType application/x-x509-ca-cert .crt .cer
        AddType application/x-pkcs12 .pfx .p12
        AddType image/png .png
        AddType image/jpeg .jpg .jpeg
        AddType image/svg+xml .svg
        AddType image/x-icon .ico
    </IfModule>
    
    # Cache control settings
    <IfModule mod_expires.c>
        ExpiresActive On
        ExpiresDefault "access plus 1 month"
        ExpiresByType text/css "access plus 1 year"
        ExpiresByType text/javascript "access plus 1 year"
        ExpiresByType image/jpeg "access plus 1 year"
        ExpiresByType image/png "access plus 1 year"
        ExpiresByType image/svg+xml "access plus 1 year"
        ExpiresByType image/x-icon "access plus 1 year"
        # Don't cache certificates
        ExpiresByType text/plain "access plus 0 seconds"
        ExpiresByType application/x-x509-ca-cert "access plus 0 seconds"
        ExpiresByType application/x-pkcs12 "access plus 0 seconds"
    </IfModule>
    
    <IfModule mod_headers.c>
        Header set Cache-Control "max-age=31536000, public"
        
        # Special headers for certificate files
        <FilesMatch "\.(pem|crt|cer|pfx|p12)$">
            Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
            Header set Pragma "no-cache"
            Header set Expires "0"
        </FilesMatch>
    </IfModule>
</Directory>

# Certificates directory configuration
<Directory "C:/inetpub/wwwroot/STATZCorp/staticfiles/certificates">
    Options -Indexes
    Require all granted
    
    # Strict security headers for certificate files
    <FilesMatch "\.(pem|crt|cer|pfx|p12)$">
        Header set X-Content-Type-Options "nosniff"
        Header set X-Frame-Options "DENY"
        Header set X-XSS-Protection "1; mode=block"
        Header set Content-Security-Policy "default-src 'none'; frame-ancestors 'none'"
    </FilesMatch>
</Directory>

# Media files configuration
Alias /media/ "C:/inetpub/wwwroot/STATZCorp/media/"
<Directory "C:/inetpub/wwwroot/STATZCorp/media">
    Options -Indexes
    Require all granted
</Directory> 